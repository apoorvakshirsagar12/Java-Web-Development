<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>Profile</title>
        <link rel="stylesheet" href="css/bootstrap.min.css"></link>        
        <link rel="stylesheet" href="css/w3.css" ></link>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins"></link>
        <script src="js/myscript.js"></script>
        <script src="js/bootstrap.min.js"></script>
        
        <script type="text/javascript">
	$(document).ready(function() {
		$.ajax({
			type : 'GET',
			url : 'viewProfile',
			success : function(responseText) {
				$('#responseNote').html(responseText);
			}
		});
	});
</script>
    </h:head>
    
    <h:body>
    <!-- Navigation Bar -->   
    <ui:include src="managerNav.xhtml" />
    
    <!-- !PAGE CONTENT! -->       
    <div class="w3-main" style="margin-left:340px;margin-right:40px">
   
  <!-- Contact -->
  <div class="w3-container" id="register" style="margin-top:100px">
            <h2 class="w3-xxlarge w3-text-red"><b>New User Registration</b></h2>
            <hr style="width:50px;border:5px solid red" class="w3-round"/>
            <h:form id="updateForm">
                <div class="w3-section">
                    <%
			String a = (String) request.getSession().getAttribute("username");

			try {
			Connection conn = DBConnection.createConnection();
                        String query = "select * from parkingowner inner join users on users.user_id= parkingowner.Users_user_id where users.username= '"
					+ a + "'";
			Statement st = conn.createStatement();
			ResultSet rs = st.executeQuery(query);
			while (rs.next()) {
                    %>
                    
                    <h:outputLabel for="txtFname">
                    <h:outputText value="First Name : "/>
                    </h:outputLabel>
                    <h:inputText styleClass="w3-input w3-border" id="txtFname" validatorMessage="Special symbols and numbers are not allowed here" value="#{register_bean.fname}" required="true" requiredMessage="Please enter your first name">
                        <f:validateRegex pattern="[a-zA-Z]+"/>
                    </h:inputText>
                    <h:message for="txtFname" style="color:red" />
                </div>
                <div class="w3-section">
                    <h:outputLabel for="txtLname">
                    <h:outputText value="Last Name : "/>
                    </h:outputLabel>
                    <h:inputText styleClass="w3-input w3-border" id="txtLname" validatorMessage="Special symbols and numbers are not allowed here" value="#{register_bean.lname}" required="true" requiredMessage="Please enter your last name">
                        <f:validateRegex pattern="[a-zA-Z]+"/>
                    </h:inputText>
                    <h:message for="txtLname" style="color:red" />
                </div>
                <div class="w3-section">
                    <h:outputLabel for="txtPhone">
                    <h:outputText value="Phone No. : "/>
                    </h:outputLabel>
                    <h:inputText styleClass="w3-input w3-border" id="txtPhone" value="#{register_bean.address}" required="true" requiredMessage="Please enter your address"/>
                    <h:message for="txtAddress" style="color:red" />
                </div>
                <div class="w3-section">
                    <h:outputLabel for="txtAddress">
                    <h:outputText value="Address : "/>
                    </h:outputLabel>
                    <h:inputTextarea styleClass="w3-input w3-border" id="txtAddress" value="#{register_bean.address}" required="true" requiredMessage="Please enter your address"/>
                    <h:message for="txtAddress" style="color:red" />
                </div>
                <div class="w3-section">
                    <h:outputLabel for="listRole">
                    <h:outputText value="Role :  "/>
                    </h:outputLabel>
                    <h:selectOneMenu id="role" value="#{register_bean.role}">
                        <f:selectItem itemValue="user" itemLabel="User" />
                        <f:selectItem itemValue="manager" itemLabel="Manager" />
                    </h:selectOneMenu>
                    
                </div>
                <div class="w3-section">
                    <h:outputLabel for="txtEmail">
                    <h:outputText value="Email Id : "/>
                    </h:outputLabel>
                    <h:inputText styleClass="w3-input w3-border" id="txtEmail" validator="EmailValidator" value="#{register_bean.email}" required="true" requiredMessage="Please enter your Email Id"/>
                    <h:message for="txtEmail" style="color:red" />
                </div>
                <div class="w3-section">
                    <h:outputLabel for="txtPasswd">
                    <h:outputText value="Password"/>
                    </h:outputLabel>
                    <h:inputSecret styleClass="w3-input w3-border" id="txtPasswd"  value="#{register_bean.passwd}" required="true" requiredMessage="Please enter the password"/>
                    <h:message for="txtPasswd" style="color:red" />
                </div>
            
                <h:commandButton styleClass="w3-button w3-block w3-padding-large w3-red w3-margin-bottom" id="submit" value="Submit" action="#{register_bean.registerUser}"/>
            </h:form>
        </div>  

<!-- End page content -->
    </div>
</h:body>
</html>



